package Boj5052;

import java.util.ArrayList;
import java.util.Stack;

class Point{
	String word;
	int depth;
	public Point(String word, int depth) {
		this.word = word;
		this.depth = depth;
	}
}

public class StackTest {
	
	static ArrayList<String> [] save;
	
	public static void run(String example) {
		int depth = 0;
		Stack<Point> stack = new Stack<Point>();
		save = new ArrayList[example.length()/2];

		for(int i = 0;i < example.length();i++) {
			if(example.charAt(i)== '(' || example.charAt(i) == '[' || example.charAt(i) == '{') {
				depth++;
				stack.add(new Point(example.charAt(i)+"", depth));
			}else if(example.charAt(i) == ' ') {
				
			}else if(example.charAt(i)== ')' || example.charAt(i) == ']' || example.charAt(i) == '}') {
				char bottom = ' ';
				if(example.charAt(i) == ')')
					bottom = '(';
				if(example.charAt(i) == ']')
					bottom = '[';
				if(example.charAt(i) == '}')
					bottom = '{';
				Point point;
				StringBuilder stringBuilder = new StringBuilder();
				String currentString ;
				int currentDepth ;
				
				while(true) {
					point = stack.pop();
					currentDepth = point.depth;
					currentString = point.word;
					stringBuilder.insert(0, currentString);
					if(point.word.equals(bottom)) {
						save[currentDepth].add(stringBuilder.toString());
						stack.pop();
						break;
					}
				}
				depth--;
			}else {//문자열 
				for(int j = i;true ;j++) {
					if(example.charAt(j)== ')' || example.charAt(j) == ']' || example.charAt(j) == '}') {
						stack.add(new Point(example.substring(i, j-1), depth));
						break;
					}
				}
			}
		}
	}
	
	public static void main(String[] args) {
		String example = "((아디다스) 무료(나이키 (풋살화)) 배송) 강남점 (축구)(잔디)";
		run(example);
	}

}
